.title-box
  %h1= @user.username
  = link_to 'bearbeiten', edit_user_path(@user), class: 'edit-link'

.row
  .col-10
    = form_with class: 'py-4 form' do |f|
      .form-row
        .col-2
          = f.label :username
        .col-4
          = f.text_field :username, class: 'form-control mb-4', disabled: true, value: @user.username
          .invalid-feedback
            Username ist erforderlich
      .form-row
        .col-2
          = f.label :email
        .col-4
          = f.email_field :email, class: 'form-control mb-4', disabled: true, value: @user.email
          .invalid-feedback
            g√ºltige Email-Adresse ist erforderlich

      .edit-actions
        .form-row
          .col-2
            = f.label :roles
          .col-4
            - @user.roles.each do |role|
              = role.name
        .form-row
          .col-2
            = f.label :otp_active
          .col-1
            .icon-toggler.small{ class: @user.otp_required_for_login? ? 'on' : 'off' }
              = svg 'lock'
              .on
                %strong aktiv
              .off
                %p inaktiv

          .col-3.text-right
            - if @user == current_user
              - if @user.otp_required_for_login
                %button.btn.icon-button{ type: 'button', 'data-toggle': 'modal', 'data-target': '#qrCode'}
                  = svg 'iphone'
                  QR-Code Anzeigen
              - else
                = link_to enable_user_path(@user), method: :patch, class: 'icon-button btn' do
                  = svg 'key'
                  Aktivieren

= render 'qrcode'
